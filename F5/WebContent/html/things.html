<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>资产管理</title>

		<link rel="stylesheet" href="../js/bootstrap/css/bootstrap.css" />
		<link rel="stylesheet" type="text/css" href="../css/common.css" />
		<link rel="stylesheet" href="../css/work.css" />

		<style type="text/css">
			.tab .nav-tabs li.active a,
			.tab .nav-tabs li a:hover{
		     background: linear-gradient(165deg, transparent 29%,#fff 80%);
		    border: none;
		    color: #fff;
		    font-size: 18px;
	        }
			
			.demo{
				background: #333335;
			}
			.tab .tab-content{
				position: absolute;
				left: -300px;
				background: #fff;
				width: 1000px;
			}
			
			body {
				background: #333335;
				background-size: cover;
				color: #33000D;
			}
			
			#head {
				width: 1000px;
				height: 50px;
				background: rgba(0, 0, 0, 0.5);
				margin: auto;
				background-image: url(../images/bg7.jpg);
				background-color: #545353;
				position: relative;
			}
			
			.carousel {
				width: 1000px;
				height: 400px;
				margin: auto;
			}
			
			.carousel-inner {
				height: 400px;
				overflow: hidden;
			}
			
			#caidan1 {
				width: 1000px;
				text-align: center;
				color: #F6F6F6;
				margin: auto;
			}
			
			#caidan2 {
				width: 1000px;
				text-align: center;
			}
			
			#things {
				background-color: #FFFFFF;
				width: 1000px;
				height: 800px;
				margin: auto;
			}
			
			.s1 {
				padding: 8px;
			}
			

			
		</style>
	</head>

	<body>
		
		
		<!--用户名显示开始-->
		<nav id="head" class="navbar navbar-inverse navbar-fixed-top">
			<div class="container">

				<!--logoa标志-->
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#myCollapse1">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
					<a href="./cloud_oa/pages/index.jsp" class="navbar-brand">
						<img src="../images/logo1.png" height="20" />
					</a>
				</div>
				<!--LOGO标志-->

				<!--当前登录用户-->
				<form if="userform" action="">
					<div class="collapse navbar-collapse navbar-right" id="myCollapse1">

					</div>

				</form>
				<!--当前登录用户-->

			</div>
			<!--/.container-fluid-->
		</nav>
		<!--用户名显示结束-->

		<!--轮播图-->
		<div id="carousel-example-generic" class="carousel slide center-block" data-ride="carousel">

			<!--轮播图格格数-->
			<ol class="carousel-indicators">
				<li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
				<li data-target="#carousel-example-generic" data-slide-to="1"></li>
			</ol>
			<!--轮播图格式-->

			<!--轮播图图片-->
			<div class="carousel-inner" role="listbox">
				<div class="item active">
					<img src="../images/19.jpg">
					<!--<div class="carousel-caption">
						图1
					</div>-->
				</div>
				<div class="item">
					<img src="../images/22.jpg">
					<!--<div class="carousel-caption">
						图2
					</div>-->
				</div>

			</div>
			<!--轮播图图片-->

			<!-- 轮播图左右移键 -->
			<a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
				<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
				<span class="sr-only">Previous</span>
			</a>
			<a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
				<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
				<span class="sr-only">Next</span>
			</a>
			<!-- 轮播图左右移键 -->
		</div>
		<!--轮播图-->

		<!--菜单栏-->
		<nav class="navbar navbar-default" role="navigation" id="caidan1" style="text-align: center;">

			<div class="container-fluid" id="caidan2">
				<!--菜单栏头-->
				<div class="navbar-header" style="width: 70px;">
					<a class="navbar-brand" href="../index.html" style="text-align: center; margin: auto;">主页</a>
				</div>
				<!--菜单栏头-->

				<div>
					<ul class="nav navbar-nav">
						<li style="width: 120px;"><a href="personal_a.html">个人中心</a></li>

						<li style="width: 120px;"><a href="room_query.html">会议室</a></li>
						<li style="width: 120px;"><a href="Work.html">工作安排</a></li>
						<li style="width: 120px;"><a href="things.html">资产管理</a></li>
						<li style="width: 120px;"><a href="expatriate.html">外派信息</a></li>
						<li style="width: 120px;"><a href="carpage.html">车辆管理</a></li>
						<li style="width: 120px;"><a href="BusinessCard.html">名片夹</a></li>

						</ul>
					</div>

			</div>
		</nav>
		<!--菜单栏-->

		<!--个人中心栏开始-->
		<div id="things">

			<!--资产管理开始-->
			<div class="demo">
			<div class="container">
				<div class="row" id="r1">
					<div class="col-md-offset-3 col-md-6">
						<div class="tab" role="tabpanel">
							<!-- Nav tabs -->
							<ul class="nav nav-tabs" role="tablist">
								<li role="presentation" class="active"><a href="#Section1" aria-controls="home" role="tab" data-toggle="tab">库存管理</a></li>
								<li role="presentation"><a href="#Section2" aria-controls="messages" role="tab" data-toggle="tab">资产消耗</a></li>
							</ul>

							<div class="tab-content tabs">

								<!--库存管理开始-->
								<div role="tabpanel" class="tab-pane fade in active" id="Section1">
									<h3>库存管理</h3>
									<!--查询开始-->
									<big><b class="col-sm-1">搜索:</b></big>
									<div class="col-sm-5 s1" >
										<big>资产id:</big><input type="text"  placeholder="请输入要查询的资产id" name="ThingsId" id="search1"  style="width: 200px;"/>
										<button type="button" class="btn btn-primary " @click="searchId()">
											<span class="glyphicon glyphicon-search"></span>查询
										</button>
									</div>
									
									<div class="col-sm-6 s1" >							
										<big>资产名字:</big><input type="text"  placeholder="请输入要查询的资产名字" name="ThingsName" id="search2" style="width: 200px;"/>
										<button type="button" class="btn btn-primary " @click="searchName()">
											<span class="glyphicon glyphicon-search"></span>查询
										</button>
									</div>
									
									<div class="col-sm-offset-1 col-sm-5 s1" >							
										<big>资产类型:</big><input type="text"  placeholder="请输入要查询的资产类型" name="ThingsType" id="search3" style="width: 195px;"/>
										<button type="button" class="btn btn-primary " @click="searchType()">
											<span class="glyphicon glyphicon-search"></span>查询
										</button>
									</div>
									<div class="col-sm-2">
										<button type="button"  id="queryAll" @click="query()" style="padding:5px 15px;">显示全部</button>
									</div>
									
									<!--查询结束-->
									
									<div class=" col-sm-12 " id="table1">
										<table class="table table-hover table-bordered">
											<thead>
												<tr>
													<td>资产编号</td>
													<td>资产名称</td>
													<td>资产类别</td>
													<td>资产规格</td>
													<td>资产单价</td>
													<td>库存数量</td>
													<td>操作</td>
												</tr>
											</thead>
											<tbody>
												<tr v-for="(things,index) in thingsList">
													<td>{{things.thingsId}}</td>
													<td>{{things.thingsName}}</td>
													<td>{{things.thingsType}}</td>
													<td>{{things.thingsSpec}}</td>
													<td>{{things.thingsMoney}}</td>
													<td>{{things.thingsNumber}}</td>
													<td>
														<button type="button" class="btn btn-primary btn-xs" @click="toUpdate(things.thingsId)">
																<span class="glyphicon glyphicon-pencil"></span>
																修改
															</button>
														<button type="button" class="btn btn-danger btn-xs" @click="del(index,things.thingsId)">
																<span class="glyphicon glyphicon-trash"></span>
																删除
															</button>
													</td>
												</tr>
											</tbody>
										</table>

										<div class="row">
											<div class="col-sm-offset-8 col-sm-4">
												<button type="button" class="btn btn-success btn-block" @click="add()">增加新资产</button>
											</div>
										</div>

									</div>
								</div>
								<!--库存管理结束-->

								<!-- 资产消耗开始 -->
								<div role="tabpanel" class="tab-pane fade " id="Section2">
									<h3>资产消耗</h3>
									<div class=" col-sm-12 ">
										<table class="table table-hover table-bordered">
											<thead>
												<tr>
													<td>资产编号</td>
													<td>资产名称</td>
													<td>资产类别</td>
													<td>已用数量</td>
													<td>操作</td>
												</tr>
											</thead>
											<tbody>
												<tr v-for="(things,index) in thingsList">
													<td>{{things.thingsId}}</td>
													<td>{{things.thingsName}}</td>
													<td>{{things.thingsType}}</td>
													<td>{{things.thingsUse}}</td>
													<td>
														<button type="button" class="btn btn-primary btn-xs" @click="toUpd(things.thingsId)">
																<span class="glyphicon glyphicon-pencil"></span>
																修改
														</button>
													</td>
												</tr>
											</tbody>
										</table>

									</div>
								</div>
								<!--资产消耗结束-->

							</div>

						</div>
					</div>
				</div>
			</div>
			</div>
			<!--资产管理结束-->

		</div>
		<!--个人中心栏结束-->

		<!--尾部介绍开始-->
		<footer>
			<div class="container-fluid footer_style">
				<div class="col-md-6 col-md-offset-3 text-center">
					<h4><img src="../images/logo1.png" height="20"/></h4>
					<p>地址：金石滩</p>
					<p>DLNU</p>
				</div>
			</div>
		</footer>
		<!--尾部介绍结束-->

		<script type="text/javascript" src="../js/jquery-3.4.1.js"></script>
		<script type="text/javascript" src="../js/bootstrap/js/bootstrap.js"></script>
		<script type="text/javascript" src="../js/layer/layer.js"></script>
		<script type="text/javascript" src="../js/vue.js"></script>
		<script type="text/javascript" src="../js/URL.js"></script>
		<script type="text/javascript" src="../js/param.js"></script>

		<script>
			
			var vue1 = new Vue({
				el: '#Section1',
				data: {
					thingsList: []
				},
				methods: {
					searchId:function(){
						var searchId = $('#search1').val();
						//调用后端功能
						$.getJSON(baseUrl + '/things/queryById1',{thingsId:searchId} ,function(data) {
							console.log(data);
							vue1.thingsList = data;
						});
						setTimeout(function() {
								$('#search1').val('');
						}, 1000);
					},
					searchName:function(){
						var searchName = $('#search2').val();
						//调用后端功能
						$.getJSON(baseUrl + '/things/queryByName',{thingsName:searchName} ,function(data) {
							console.log(data);
							vue1.thingsList = data;
						});
						setTimeout(function() {
								$('#search2').val('');
						}, 1000);
					},
					searchType:function(){
						var searchType = $('#search3').val();
						//调用后端功能
						$.getJSON(baseUrl + '/things/queryByType',{thingsType:searchType} ,function(data) {
							console.log(data);
							vue1.thingsList = data;
						});
						setTimeout(function() {
								$('#search3').val('');
						}, 1000);
					},

					//查询数据
					query: function() {

						//调用后端功能
						$.getJSON(baseUrl + '/things/query', function(data) {
							vue1.thingsList = data;
						});
					},

					//删除数据
					del: function(index, thingsId) {

						if (!window.confirm('确定要删除此资产吗')) {
							return;
						}

						//调用后端功能
						$.get(baseUrl + '/things/delete', {thingsId:thingsId}, function(data) {

							layer.msg('删除资产成功');

							setTimeout(function() {
								vue1.thingsList.splice(index, 1); //前端删除
							}, 1000);
						});

					},

					//修改方法
					toUpdate: function(thingsId) {
						layer.open({
							title: '修改资产',
							type: 2,
							area: ['650px', '650px'], //宽高
							content: 'updateThings.html?thingsId=' + thingsId
						});
					},

					//增加资产
					add: function() {
						layer.open({
							title: '增加资产',
							type: 2,
							area: ['620px', '600px'], //宽高
							content: 'addThings.html'
						});
					}

				},
				mounted: function() {
					this.query();
				}
			});


			var vue2 = new Vue({
				el: '#Section2',
				data: {
					thingsList: []
				},
				methods: {
					//查询数据
					query: function() {

						//调用后端功能
						$.getJSON(baseUrl + '/things/query', function(data) {
							vue2.thingsList = data;
						});
					},
					
					//增加消耗数量
					toUpd:function(thingsId){
						layer.open({
							title: '修改已用数量',
							type: 2,
							area: ['650px', '640px'], //宽高
							content: 'updateUseThings.html?thingsId=' + thingsId
						});
					}

				},
				mounted: function() {
					this.query();
				}
			});
		</script>

	</body>

</html>